<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [pycrypto] the sad state of pycrypto
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pycrypto%40lists.dlitz.net?Subject=%5Bpycrypto%5D%20the%20sad%20state%20of%20pycrypto&In-Reply-To=BAY105-DS6DE1AA2CEEFC3406A72CAAA180%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000037.html">
   <LINK REL="Next"  HREF="000039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pycrypto] the sad state of pycrypto</H1>
    <B>Dwayne C. Litzenberger</B> 
    <A HREF="mailto:pycrypto%40lists.dlitz.net?Subject=%5Bpycrypto%5D%20the%20sad%20state%20of%20pycrypto&In-Reply-To=BAY105-DS6DE1AA2CEEFC3406A72CAAA180%40phx.gbl"
       TITLE="[pycrypto] the sad state of pycrypto">dlitz at dlitz.net
       </A><BR>
    <I>Sun Nov  9 08:08:43 CST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000037.html">[pycrypto] the sad state of pycrypto
</A></li>
        <LI>Next message: <A HREF="000039.html">[pycrypto] the sad state of pycrypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Nov 08, 2008 at 04:18:51PM -0430, Stefan Spoettl wrote:
&gt;<i>  4.. Random generator
</I>&gt;<i>  Sorry Dwanye, I disagree with you. A cryptographic library has to offer 
</I>&gt;<i>  a cryptographic secure random generator. Without that the library is not 
</I>&gt;<i>  useful at all.
</I>
Actually, it looks like you agree with me.

PyCrypto (in the git repository) now has a very simple CSPRNG API.  You can 
write code like this:

     from Crypto import Random

     rng = Random.new()      # returns a file-like object
     x = rng.read(16)        # read 16 bytes of RNG data

You can also instantiate Crypto.Random.RandomPoolCompat, and use that in 
the place of old code that expects the RandomPool API.

On the back-end of this, we have the Fortuna PRNG (which runs AES in 
counter mode), seeded by the operating system, by time.time() and by 
time.clock() (see Random/_UserFriendlyRNG.py).  The code is kind of ugly, 
and more complex than I really would like, but that's what happens when we 
try to implement a robust PRNG in a library.

A strong PRNG realistically needs to be provided by the operating system, 
or at least by a long-running process.  Doing it in PyCrypto is much more 
error-prone: PyCrypto has to deal with users invoking os.fork() (thus 
duplicating the RNG state), access from multiple threads, the lack of 
permanent storage, and the fact that Python's immutable strings meands that  
secret data are copied to several places in memory over the life of the 
process.  It also has to be portable, making it difficult to use 
platform-specific sources of entropy.   A stand-alone RNG would not have to 
deal with any of these problems.

Having said that, people still need to generate strong random numbers, and 
experience with RandomPool shows that they're going to get it wrong unless 
the library provides a robust API to do it for them.  That's the idea 
behind Crypto.Random.new().

-- 
Dwayne C. Litzenberger &lt;<A HREF="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">dlitz at dlitz.net</A>&gt;
  Key-signing key   - 19E1 1FE8 B3CF F273 ED17  4A24 928C EC13 39C2 5CF7
  Annual key (2008) - 4B2A FD82 FC7D 9E38 38D9  179F 1C11 B877 E780 4B45
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : <A HREF="http://lists.dlitz.net/pipermail/pycrypto/attachments/20081109/7547df22/attachment.pgp">http://lists.dlitz.net/pipermail/pycrypto/attachments/20081109/7547df22/attachment.pgp</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000037.html">[pycrypto] the sad state of pycrypto
</A></li>
	<LI>Next message: <A HREF="000039.html">[pycrypto] the sad state of pycrypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">More information about the pycrypto
mailing list</a><br>
</body></html>
