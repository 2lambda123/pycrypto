<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pycrypto] DES3 problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pycrypto%40lists.dlitz.net?Subject=Re%3A%20%5Bpycrypto%5D%20DES3%20problem&In-Reply-To=%3CCAGfyce1cOR4OSbW9aaoQC4gTPeav1BY-RY0AXq4gMnSZp-mQgw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000737.html">
   <LINK REL="Next"  HREF="000739.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pycrypto] DES3 problem</H1>
    <B>Legrandin</B> 
    <A HREF="mailto:pycrypto%40lists.dlitz.net?Subject=Re%3A%20%5Bpycrypto%5D%20DES3%20problem&In-Reply-To=%3CCAGfyce1cOR4OSbW9aaoQC4gTPeav1BY-RY0AXq4gMnSZp-mQgw%40mail.gmail.com%3E"
       TITLE="[pycrypto] DES3 problem">helderijs at gmail.com
       </A><BR>
    <I>Fri Nov 29 07:16:47 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000737.html">[pycrypto] DES3 problem
</A></li>
        <LI>Next message: <A HREF="000739.html">[pycrypto] DES3 problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#738">[ date ]</a>
              <a href="thread.html#738">[ thread ]</a>
              <a href="subject.html#738">[ subject ]</a>
              <a href="author.html#738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dave,

DES3 (which is TripleDES) works correctly.
It just happens that the examples for DES (Single DES) and DES3
modules got swapped by mistake.
The DES3 example you are looking for is actually here:

<A HREF="https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.DES-module.html">https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.DES-module.html</A>

It was a while back but I recall docs have been fixed in the meanwhile
and they are on git.

2013/11/27 Dave Pawson &lt;<A HREF="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">dave.pawson at gmail.com</A>&gt;:
&gt;<i> From the lack of response, should I assume that DES3 isn't yet working?
</I>&gt;<i>
</I>&gt;<i> TiA, DaveP
</I>&gt;<i>
</I>&gt;<i> On 24 November 2013 14:50, Dave Pawson &lt;<A HREF="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">dave.pawson at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> <A HREF="https://www.dlitz.net/software/pycrypto/api/current/">https://www.dlitz.net/software/pycrypto/api/current/</A> states DES3 requires an iv.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> in the api docs the example uses DES not DES3?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As an example, encryption can be done as follows:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> from Crypto.Cipher import DES
</I>&gt;&gt;&gt;&gt;&gt;<i> from Crypto import Random
</I>&gt;&gt;&gt;&gt;&gt;<i> from Crypto.Util import Counter
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> key = b'-8B key-'
</I>&gt;&gt;&gt;&gt;&gt;<i> nonce = Random.new().read(DES.block_size/2)
</I>&gt;&gt;&gt;&gt;&gt;<i> ctr = Counter.new(DES.block_size*8/2, prefix=nonce)
</I>&gt;&gt;&gt;&gt;&gt;<i> cipher = DES.new(key, DES.MODE_CTR, counter=ctr)
</I>&gt;&gt;&gt;&gt;&gt;<i> plaintext = b'We are no longer the knights who say ni!'
</I>&gt;&gt;&gt;&gt;&gt;<i> msg = nonce + cipher.encrypt(plaintext)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Using
</I>&gt;&gt;<i>         iv=Random.new().read(DES3.block_size)
</I>&gt;&gt;<i>         ciphere = DES3.new(key,mode,IV=iv)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm getting
</I>&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;<i>   File &quot;./tester.py&quot;, line 405, in testBlock5
</I>&gt;&gt;<i>     ciphere = DES3.new(key,mode,IV=iv)
</I>&gt;&gt;<i>   File &quot;/usr/lib64/python3.3/site-packages/Crypto/Cipher/DES3.py&quot;,
</I>&gt;&gt;<i> line 114, in new
</I>&gt;&gt;<i>     return DES3Cipher(key, *args, **kwargs)
</I>&gt;&gt;<i>   File &quot;/usr/lib64/python3.3/site-packages/Crypto/Cipher/DES3.py&quot;,
</I>&gt;&gt;<i> line 76, in __init__
</I>&gt;&gt;<i>     blockalgo.BlockAlgo.__init__(self, _DES3, key, *args, **kwargs)
</I>&gt;&gt;<i>   File &quot;/usr/lib64/python3.3/site-packages/Crypto/Cipher/blockalgo.py&quot;,
</I>&gt;&gt;<i> line 155, in __init__
</I>&gt;&gt;<i>     raise ValueError(&quot;MODE_OPENPGP requires an IV&quot;)
</I>&gt;&gt;<i> ValueError: MODE_OPENPGP requires an IV
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Am I wrong in my usage or is the code incorrect please
</I>&gt;&gt;<i> wrt iv parameter?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tia
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Dave Pawson
</I>&gt;&gt;<i> XSLT XSL-FO FAQ.
</I>&gt;&gt;<i> Docbook FAQ.
</I>&gt;&gt;<i> <A HREF="http://www.dpawson.co.uk">http://www.dpawson.co.uk</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Dave Pawson
</I>&gt;<i> XSLT XSL-FO FAQ.
</I>&gt;<i> Docbook FAQ.
</I>&gt;<i> <A HREF="http://www.dpawson.co.uk">http://www.dpawson.co.uk</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> pycrypto mailing list
</I>&gt;<i> <A HREF="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">pycrypto at lists.dlitz.net</A>
</I>&gt;<i> <A HREF="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000737.html">[pycrypto] DES3 problem
</A></li>
	<LI>Next message: <A HREF="000739.html">[pycrypto] DES3 problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#738">[ date ]</a>
              <a href="thread.html#738">[ thread ]</a>
              <a href="subject.html#738">[ subject ]</a>
              <a href="author.html#738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">More information about the pycrypto
mailing list</a><br>
</body></html>
