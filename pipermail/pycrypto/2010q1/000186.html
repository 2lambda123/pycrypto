<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [pycrypto] FW: python crypto with python 3.0 or 3.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pycrypto%40lists.dlitz.net?Subject=%5Bpycrypto%5D%20FW%3A%20python%20crypto%20with%20python%203.0%20or%203.1&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000185.html">
   <LINK REL="Next"  HREF="000199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pycrypto] FW: python crypto with python 3.0 or 3.1</H1>
    <B>Christoph Tapler</B> 
    <A HREF="mailto:pycrypto%40lists.dlitz.net?Subject=%5Bpycrypto%5D%20FW%3A%20python%20crypto%20with%20python%203.0%20or%203.1&In-Reply-To="
       TITLE="[pycrypto] FW: python crypto with python 3.0 or 3.1">christoph.tapler at gmx.net
       </A><BR>
    <I>Sun Feb 28 15:04:12 CST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000185.html">[pycrypto] Installation Problem
</A></li>
        <LI>Next message: <A HREF="000199.html">[pycrypto] FW: python crypto with python 3.0 or 3.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#186">[ date ]</a>
              <a href="thread.html#186">[ thread ]</a>
              <a href="subject.html#186">[ subject ]</a>
              <a href="author.html#186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Grail,

Thanks for your patch! I assume you generated the patch based on a Unix
environment. Tried to compile pycrypto together with your patch on my
Windows machine. However, it did not work out.
After fixing two straightforward errors in setup.py (relevant to Windows 
only,
see [1], [2]), I got stuck when linking the module MD4 and other hashing 
methods
(MD2, etc).

Now, when I compare the build process against Python 2, I see the following
difference:

###############################################################################
[Python 2:]
C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL 
/nologo /INCRE
MENTAL:NO &quot;/LIBPATH:C:\Program Files\Python26\libs&quot; &quot;/LIBPATH:C:\Program 
Files\P
ython26\PCbuild&quot; /EXPORT:initMD4 
build\temp.win32-2.6\Release\src/MD4.obj /OUT:b
uild\lib.win32-2.6\Crypto\Hash\MD4.pyd 
/IMPLIB:build\temp.win32-2.6\Release\src\
MD4.lib /MANIFESTFILE:build\temp.win32-2.6\Release\src\MD4.pyd.manifest
    Creating library build\temp.win32-2.6\Release\src\MD4.lib and object 
build\te
mp.win32-2.6\Release\src\MD4.exp
C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\mt.exe -nologo 
-manifest build
\temp.win32-2.6\Release\src\MD4.pyd.manifest 
-outputresource:build\lib.win32-2.6
\Crypto\Hash\MD4.pyd;2

[Python 3:]
C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL 
/nologo /INCRE
MENTAL:NO &quot;/LIBPATH:C:\Program Files\Python31\libs&quot; &quot;/LIBPATH:C:\Program 
Files\P
ython31\PCbuild&quot; /EXPORT:PyInit_MD4 
build\temp.win32-3.1\Release\src/MD4.obj /OU
T:build\lib.win32-3.1\Crypto\Hash\MD4.pyd 
/IMPLIB:build\temp.win32-3.1\Release\s
rc\MD4.lib /MANIFESTFILE:build\temp.win32-3.1\Release\src\MD4.pyd.manifest
LINK : error LNK2001: unresolved external symbol PyInit_MD4
build\temp.win32-3.1\Release\src\MD4.lib : fatal error LNK1120: 1 
unresolved ext
ernals
error: command '&quot;C:\Program Files\Microsoft Visual Studio 
9.0\VC\BIN\link.exe&quot;'
failed with exit status 1120
###############################################################################

It seems that the /EXPORT argument for the Windows Linker is assembled in a
different way. This leads to an export name, which does not exist as 
function.
Hence the linker terminates with an error.

Any idea what I need to change to get the /EXPORT name fixed? Is this 
problem
located in pycrypto or in the Python distutils?


##### Regarding the changes in setup.py:
[1] Changed the following stmt:
From
print &lt;&lt; sys.stderr &quot;warning: GMP library not found; Not building 
Crypto.PublicKey._fastmath.&quot;
to
print(&quot;warning: GMP library not found; Not building 
Crypto.PublicKey._fastmath.&quot;, sys.stderr)

[2] (Temporarily) disabled winrand.c which is included when using the 
Windows platform.

Cheers, Christoph

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000185.html">[pycrypto] Installation Problem
</A></li>
	<LI>Next message: <A HREF="000199.html">[pycrypto] FW: python crypto with python 3.0 or 3.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#186">[ date ]</a>
              <a href="thread.html#186">[ thread ]</a>
              <a href="subject.html#186">[ subject ]</a>
              <a href="author.html#186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto">More information about the pycrypto
mailing list</a><br>
</body></html>
