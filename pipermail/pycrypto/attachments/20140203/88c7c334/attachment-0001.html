<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;may&nbsp;not&nbsp;understand&nbsp;the&nbsp;constraints&nbsp;of&nbsp;your&nbsp;situation,&nbsp;but&nbsp;wouldn&#39;t&nbsp;python&#39;s&nbsp;&quot;universal&nbsp;newlines&quot;&nbsp;file-open&nbsp;mode&nbsp;achieve&nbsp;what&nbsp;you&nbsp;want?&nbsp; infile&nbsp;=&nbsp;open(filename,&nbsp;&#39;Urb&#39;)&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;--Jeremy&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Feb&nbsp;3,&nbsp;2014&nbsp;at&nbsp;5:35&nbsp;AM,&nbsp;Dave&nbsp;Pawson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:dave.pawson@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;dave.pawson@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Now&nbsp;resolved.&lt;br&gt;<br>
Source&nbsp;plain&nbsp;text&nbsp;is&nbsp;created&nbsp;/&nbsp;modified&nbsp;in&nbsp;either&nbsp;DOS&nbsp;or&nbsp;Linux&nbsp;(np&nbsp;to&nbsp;add&nbsp;Mac)&lt;br&gt;<br>
&lt;br&gt;<br>
read&nbsp;using&lt;br&gt;<br>
chunk&nbsp;=&nbsp;unicode(infile.read(chunksize))&lt;br&gt;<br>
#&nbsp;replace&nbsp;newline&nbsp;as&nbsp;appropriate&lt;br&gt;<br>
chunk=replaceNL(chunk)&lt;br&gt;<br>
#&nbsp;Convert&nbsp;to&nbsp;byte&nbsp;string&lt;br&gt;<br>
chunk=safe_str(chunk)&lt;br&gt;<br>
encrypt&nbsp;and&nbsp;write&nbsp;to&nbsp;disk&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;for&nbsp;decrypt&lt;br&gt;<br>
#Iterate&nbsp;over&nbsp;file&nbsp;to&nbsp;read&nbsp;into&nbsp;string&lt;br&gt;<br>
#&nbsp;replace&nbsp;the&nbsp;individual&nbsp;bytes&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;character&nbsp;(u2022&nbsp;in&nbsp;my&nbsp;case)&lt;br&gt;<br>
#&nbsp;with&nbsp;\n&nbsp;for&nbsp;the&nbsp;local&nbsp;machine&lt;br&gt;<br>
retval&nbsp;=&nbsp;replaceBullet(retval)&lt;br&gt;<br>
&lt;br&gt;<br>
code&nbsp;below&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#Swap&nbsp;\n&nbsp;for&nbsp;\u2022&lt;br&gt;<br>
#&lt;br&gt;<br>
def&nbsp;replaceNL(str):&lt;br&gt;<br>
 &nbsp; &nbsp;#&nbsp;If&nbsp;DOS,&nbsp;replace&nbsp;\r\x0A&lt;br&gt;<br>
 &nbsp; &nbsp;#&nbsp;If&nbsp;Unix,&nbsp;replace&nbsp;\n&lt;br&gt;<br>
 &nbsp; &nbsp;lineEnd=u&#39;\n&#39;&lt;br&gt;<br>
 &nbsp; &nbsp;if&nbsp;string.find(str,&#39;\r\x0a&#39;):&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;lineEnd=u&#39;\r\x0A&#39;&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;string.replace(str,lineEnd,u&#39;\u2022&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Replace&nbsp;bullet&nbsp;by&nbsp;\n&lt;br&gt;<br>
#&lt;br&gt;<br>
def&nbsp;replaceBullet(bstr):&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;string.replace(bstr,u&#39;\\u2022&#39;,u&#39;\n&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;safe_str(obj):&lt;br&gt;<br>
 &nbsp; &nbsp;&quot;&quot;&quot;&nbsp;return&nbsp;the&nbsp;byte&nbsp;string&nbsp;representation&nbsp;of&nbsp;obj&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
 &nbsp; &nbsp;try:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;str(obj)&lt;br&gt;<br>
 &nbsp; &nbsp;except&nbsp;UnicodeEncodeError:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;obj&nbsp;is&nbsp;unicode&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;unicode(obj).encode(&#39;unicode_escape&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
HTH&nbsp;others,&nbsp;though&nbsp;it&nbsp;seems&nbsp;messy,&nbsp;it&nbsp;works.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Dave&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;3&nbsp;February&nbsp;2014&nbsp;09:39,&nbsp;Dave&nbsp;Pawson&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dave.pawson@gmail.com&quot;&gt;dave.pawson@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;I&#39;m&nbsp;having&nbsp;a&nbsp;problem&nbsp;&#39;sharing&#39;&nbsp;an&nbsp;encrypted&nbsp;file&nbsp;between&lt;br&gt;<br>
&gt;&nbsp;MSDOS&nbsp;and&nbsp;Linux.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;so&nbsp;I&nbsp;thought&nbsp;I&#39;d&nbsp;replace&nbsp;\nl&nbsp;in&nbsp;the&nbsp;plain&nbsp;text&nbsp;with&nbsp;a&nbsp;non&nbsp;ASCII&lt;br&gt;<br>
&gt;&nbsp;character&nbsp;prior&nbsp;to&nbsp;encryption.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;encryptor&nbsp;=&nbsp;AES.new(key,&nbsp;AES.MODE_CBC,&nbsp;iv)&lt;br&gt;<br>
&gt;&nbsp;outfile.write(encryptor.encrypt(chunk))&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;gives&nbsp;me&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; File&nbsp;&quot;/usr/lib64/python2.7/site-packages/Crypto/Cipher/blockalgo.py&quot;,&lt;br&gt;<br>
&gt;&nbsp;line&nbsp;244,&nbsp;in&nbsp;encrypt&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;return&nbsp;self._cipher.encrypt(plaintext)&lt;br&gt;<br>
&gt;&nbsp;UnicodeEncodeError:&nbsp;&#39;ascii&#39;&nbsp;codec&nbsp;can&#39;t&nbsp;encode&nbsp;character&nbsp;u&#39;\u2022&#39;&nbsp;in&lt;br&gt;<br>
&gt;&nbsp;position&nbsp;34:&nbsp;ordinal&nbsp;not&nbsp;in&nbsp;range(128)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;would&nbsp;seem&nbsp;I&nbsp;can&#39;t&nbsp;use&nbsp;non-ASCII&nbsp;characters,&nbsp;at&nbsp;least&nbsp;with&nbsp;AES,&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;this&nbsp;right&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;not,&nbsp;how&nbsp;to&nbsp;address&nbsp;it&nbsp;please?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;regards&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;--&lt;br&gt;<br>
&gt;&nbsp;Dave&nbsp;Pawson&lt;br&gt;<br>
&gt;&nbsp;XSLT&nbsp;XSL-FO&nbsp;FAQ.&lt;br&gt;<br>
&gt;&nbsp;Docbook&nbsp;FAQ.&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.dpawson.co.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dpawson.co.uk&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Dave&nbsp;Pawson&lt;br&gt;<br>
XSLT&nbsp;XSL-FO&nbsp;FAQ.&lt;br&gt;<br>
Docbook&nbsp;FAQ.&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.dpawson.co.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dpawson.co.uk&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
pycrypto&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:pycrypto@lists.dlitz.net&quot;&gt;pycrypto@lists.dlitz.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.dlitz.net/cgi-bin/mailman/listinfo/pycrypto&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
